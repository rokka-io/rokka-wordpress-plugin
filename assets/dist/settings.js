jQuery(document).ready((function(e){function a(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()+" "+("0"+(e.getHours()+1)).slice(-2)+":"+("0"+(e.getMinutes()+1)).slice(-2)+":"+("0"+(e.getSeconds()+1)).slice(-2)+"]"}e("#mass-upload-everything").click((function(s){var t=e("#upload-progressbar"),l=e("#upload-progress-log-wrapper"),o=e("#upload-progress-log"),i=e("#upload-progress-info"),n=rokkaSettings.imagesToUpload,r=!1;i.html(""),o.val(""),t.hide(),l.hide();var c=100/n.length,d=0;n.length>0?(t.show(),t.progressbar({value:0}),l.show(),function s(l){if(l.length>0){var n=l.shift();e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"rokka_upload_image",image_id:n,nonce:rokkaSettings.nonce}}).done((function(){o.val(o.val()+a()+" "+rokkaSettings.labels.uploadSingleImageSuccess+" "+n+"\n")})).fail((function(e){o.val(o.val()+a()+" "+rokkaSettings.labels.uploadSingleImageFail+" "+n+" / Error: "+e.responseJSON.data+"\n"),r=!0})).always((function(){d+=1,t.progressbar("value",d*c),s(l)}))}else r?(o.val(o.val()+a()+" "+rokkaSettings.labels.uploadImagesFail),i.html('<div class="notice notice-error"><p>'+rokkaSettings.labels.uploadImagesFail+"</p></div>")):(o.val(o.val()+a()+" "+rokkaSettings.labels.uploadImagesSuccess),i.html('<div class="notice notice-success"><p>'+rokkaSettings.labels.uploadImagesSuccess+"</p></div>")),e("#mass-delete-everything").hide(),e("#mass-upload-everything").hide(),e("#remove-hashes").hide(),e("#reload-mass-upload-page").addClass("show")}(n)):i.html('<div class="notice notice-success"><p>'+rokkaSettings.labels.uploadImagesAlreadyUploaded+"</p></div>")})),e("#mass-delete-everything").click((function(s){var t=e("#delete-progressbar"),l=e("#delete-progress-log-wrapper"),o=e("#delete-progress-log"),i=e("#delete-progress-info"),n=rokkaSettings.imagesToDelete,r=!1;if(!0===confirm(rokkaSettings.labels.deleteImagesConfirm)){i.html(""),o.val(""),t.hide(),l.hide();var c=100/n.length,d=0;n.length>0?(t.show(),t.progressbar({value:0}),l.show(),function s(l){if(l.length>0){var n=l.shift();e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"rokka_delete_image",image_id:n,nonce:rokkaSettings.nonce}}).done((function(){o.val(o.val()+a()+" "+rokkaSettings.labels.deleteSingleImageSuccess+" "+n+"\n")})).fail((function(e){o.val(o.val()+a()+" "+rokkaSettings.labels.deleteSingleImageFail+" "+n+" / Error: "+e.responseJSON.data+"\n"),r=!0})).always((function(){d+=1,t.progressbar("value",d*c),s(l)}))}else r?(o.val(o.val()+a()+" "+rokkaSettings.labels.deleteImagesFail),i.html('<div class="notice notice-error"><p>'+rokkaSettings.labels.deleteImagesFail+"</p></div>")):(o.val(o.val()+a()+" "+rokkaSettings.labels.deleteImagesSuccess),i.html('<div class="notice notice-success"><p>'+rokkaSettings.labels.deleteImagesSuccess+"</p></div>")),e("#mass-delete-everything").hide(),e("#mass-upload-everything").hide(),e("#remove-hashes").hide(),e("#reload-mass-delete-page").addClass("show")}(n)):i.html('<div class="notice notice-success"><p>'+rokkaSettings.labels.deleteImagesNoImage+"</p></div>")}})),e("#remove-hashes").click((function(a){var s=e("#remove-hashes-progress-info");!0===confirm(rokkaSettings.labels.removeHashesConfirm)&&(s.html(""),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"rokka_remove_hashes",nonce:rokkaSettings.nonce}}).done((function(){s.html('<div class="notice notice-success"><p>'+rokkaSettings.labels.removeHashesSuccess+"</p></div>")})).fail((function(e){s.html('<div class="notice notice-error"><p>'+rokkaSettings.labels.removeHashesFail+"</p></div>")})).always((function(){e("#mass-delete-everything").hide(),e("#mass-upload-everything").hide(),e("#remove-hashes").hide(),e("#reload-remove-hashes-page").addClass("show")})))})),e("#sync-rokka-stacks").click((function(a){e("#progress-info-stacks").html('<div class="notice notice-info"><p class="loading-indicator"><img src="'+rokkaSettings.loadingSpinnerUrl+'" alt="" width="16" height="16" /><span> '+rokkaSettings.labels.createStacksStart+"</span></p></div>"),e.ajax({type:"GET",url:ajaxurl,data:{action:"rokka_sync_stacks",nonce:rokkaSettings.nonce}}).done((function(){e("#progress-info-stacks").html('<div class="notice notice-success"><p>'+rokkaSettings.labels.syncStacksSuccess+"</p></div>"),e("#sync-rokka-stacks").hide(),e("#reload-sync-stacks-page").addClass("show")})).fail((function(a){e("#progress-info-stacks").html('<div class="notice notice-error"><p>'+rokkaSettings.labels.syncStacksFail+" "+a.responseJSON.data+"</p></div>")}))})),e("#check-rokka-credentials").click((function(a){a.preventDefault(),e.ajax({type:"GET",url:ajaxurl,data:{action:"rokka_check_credentials",nonce:rokkaSettings.nonce}}).done((function(a){e("#rokka-credentials-status").html('<div class="notice notice-success"><p>'+a.data+"</p></div>")})).fail((function(a){e("#rokka-credentials-status").html('<div class="notice notice-error"><p>'+a.responseJSON.data+"</p></div>")}))}))}));
//# sourceMappingURL=settings.js.map
